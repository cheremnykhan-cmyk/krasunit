<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Калькулятор стоимости — КрасЮнит</title>
  <meta name="description" content="Онлайн калькулятор стоимости гаражей, ангаров и складов из ЛСТК под ключ. Точный расчет с учетом фундамента.">
  <link rel="stylesheet" href="/krasunit/style.css">
</head>
<body>
  <div class="container">
    <header>
      <div style="text-align: center; margin-bottom: 20px">
        <img src="/krasunit/Logo.JPG" alt="КрасЮнит" style="max-height: 80px; max-width: 100%;">
      </div>
      <h1>Калькулятор стоимости</h1>
      <p class="subtitle">Рассчитайте стоимость вашего объекта из ЛСТК под ключ</p>
    </header>

    <a href="/krasunit/" class="back-link">← Вернуться на главную страницу</a>

    <div class="section">
      <h2>Рассчитайте стоимость онлайн</h2>
      <div class="calc-box">
        <label>Длина (м)</label>
        <input type="number" id="length" min="4" max="20" step="0.5" value="6">
        
        <label>Ширина (м)</label>
        <input type="number" id="width" min="4" max="12" step="0.5" value="6">
        
        <label>Высота (м)</label>
        <input type="number" id="height" min="2.5" max="8" step="0.5" value="4">
        
        <label>Тип фундамента *</label>
        <select id="foundationType" required>
          <option value="none">Выберите тип фундамента</option>
          <option value="lentochny">Ленточный фундамент</option>
          <option value="plita">Монолитная плита</option>
          <option value="svai-vintovye">Винтовые сваи</option>
          <option value="svai-zabivnye">Забивные сваи</option>
          <option value="rostverk">Ростверки</option>
        </select>
        
        <div id="lentochnyFields" class="foundation-section">
          <h3>Параметры ленточного фундамента</h3>
          <label>Периметр ленты (м)</label>
          <input type="number" id="perimeter" min="10" max="100" step="0.5" value="24">
          
          <label>Высота ленты (м)</label>
          <input type="number" id="foundationHeight" min="0.3" max="2" step="0.1" value="0.8">
          
          <label>Ширина ленты (м)</label>
          <input type="number" id="foundationWidth" min="0.3" max="1" step="0.1" value="0.5">
        </div>
        
        <div id="plitaFields" class="foundation-section">
          <h3>Параметры монолитной плиты</h3>
          <label>Длина плиты (м)</label>
          <input type="number" id="slabLength" min="4" max="20" step="0.5" value="6">
          
          <label>Ширина плиты (м)</label>
          <input type="number" id="slabWidth" min="4" max="12" step="0.5" value="6">
          
          <label>Высота плиты (м)</label>
          <input type="number" id="slabHeight" min="0.2" max="0.5" step="0.05" value="0.3">
        </div>
        
        <div id="requestFields" class="foundation-section">
          <p style="font-weight: bold; color: #2A52BE;">Детальный расчет стоимости фундамента будет предоставлен специалистом после уточнения всех параметров.</p>
        </div>
        
        <div id="result" class="result">Выберите тип фундамента для расчета общей стоимости</div>
        
        <button onclick="calculate()">Рассчитать полную стоимость</button>
      </div>
    </div>

    <div class="section">
      <h2>Получите точный расчёт</h2>
      <div class="form-box">
        <form id="contactForm">
          <label>Город / регион *</label>
          <input type="text" name="city" required placeholder="Например: Красноярск">
          
          <label>Телефон *</label>
          <input type="tel" name="phone" required placeholder="+7 (___) ___-__-__">
          
          <label>Email</label>
          <input type="email" name="email" placeholder="Ваш email для отправки расчёта">
          
          <label>Дополнительные пожелания</label>
          <textarea name="comments" rows="3" placeholder="Опишите ваши требования подробнее"></textarea>
          
          <button type="submit">Получить расчёт бесплатно</button>
        </form>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <p><strong>КрасЮнит</strong> — изготовление и продажа гаражей, боксов, ангаров, складов из ЛСТК<br>
      Email: KrasUnit@mail.ru<br>
      Телефон: +7 (391) 282-23-40<br>
      Работаем по всей России</p>
    </div>
  </footer>

  <script>
    // Код для калькулятора и формы
    function calculate() {
      // Расчет стоимости, как в основной версии
      const length = parseFloat(document.getElementById('length').value);
      const width = parseFloat(document.getElementById('width').value);
      const height = parseFloat(document.getElementById('height').value);
      const foundationType = document.getElementById('foundationType').value;
      const resultEl = document.getElementById('result');
      
      if (!length || !width || !height || foundationType === 'none') {
        resultEl.innerHTML = "<span style='color:red'>Пожалуйста, заполните все поля и выберите тип фундамента</span>";
        return;
      }
      
      // Расчет стоимости здания
      const area = length * width;
      const basePrice = area * 22500;
      const baseHeight = area <= 100 ? 3.5 : 6;
      const extra = Math.max(0, height - baseHeight);
      const buildingCost = basePrice * (1 + extra * 0.15);
      
      // Расчет стоимости фундамента
      let foundationCost = 0;
      
      if (foundationType === 'lentochny') {
        const perimeter = parseFloat(document.getElementById('perimeter').value);
        const fHeight = parseFloat(document.getElementById('foundationHeight').value);
        const fWidth = parseFloat(document.getElementById('foundationWidth').value);
        
        const concreteVolume = perimeter * fHeight * fWidth;
        const rebarVolume = concreteVolume * 0.15; // 15% от объема бетона
        const rebarWeight = rebarVolume * 2.5; // приблизительный вес арматуры
        const concreteCost = concreteVolume * 9500;
        const rebarCost = rebarWeight * 80000;
        const workCost = concreteVolume * 19850;
        
        foundationCost = concreteCost + rebarCost + workCost;
      } 
      else if (foundationType === 'plita') {
        const slabLength = parseFloat(document.getElementById('slabLength').value);
        const slabWidth = parseFloat(document.getElementById('slabWidth').value);
        const slabHeight = parseFloat(document.getElementById('slabHeight').value);
        
        const concreteVolume = slabLength * slabWidth * slabHeight;
        const rebarVolume = concreteVolume * 0.15;
        const rebarWeight = rebarVolume * 2.5;
        const concreteCost = concreteVolume * 9500;
        const rebarCost = rebarWeight * 80000;
        const workCost = concreteVolume * 19850;
        
        foundationCost = concreteCost + rebarCost + workCost;
      }
      
      // Общая стоимость
      const totalCost = buildingCost + foundationCost;
      
      // Формирование результата
      let resultHTML = `
        Ориентировочная стоимость здания: <strong>${Math.round(buildingCost).toLocaleString('ru-RU')} ₽</strong>
      `;
      
      if (foundationType !== 'none') {
        if (foundationType === 'lentochny' || foundationType === 'plita') {
          resultHTML += `<br>Стоимость фундамента: <strong>${Math.round(foundationCost).toLocaleString('ru-RU')} ₽</strong>`;
        } else {
          resultHTML += `<br>Стоимость фундамента: <strong>по запросу</strong>`;
        }
        
        resultHTML += `<br><br><strong>Итоговая стоимость: ${Math.round(totalCost).toLocaleString('ru-RU')} ₽</strong>`;
      }
      
      resultEl.innerHTML = resultHTML;
    }
    
    // Показать/скрыть поля фундамента
    document.getElementById('foundationType').addEventListener('change', function() {
      document.getElementById('lentochnyFields').style.display = 'none';
      document.getElementById('plitaFields').style.display = 'none';
      document.getElementById('requestFields').style.display = 'none';
      
      if (this.value === 'lentochny') {
        document.getElementById('lentochnyFields').style.display = 'block';
      } else if (this.value === 'plita') {
        document.getElementById('plitaFields').style.display = 'block';
      } else if (this.value !== 'none') {
        document.getElementById('requestFields').style.display = 'block';
      }
    });
    
    // Форма заявки
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const city = document.querySelector('[name="city"]').value;
      alert(`✅ Спасибо за заявку!\n\nДля города ${city} мы рассчитаем точную стоимость в течение 2 часов и вышлем детальный расчет на ваш email или телефон.`);
      this.reset();
    });
    
    // Автоматический расчет при загрузке
    document.addEventListener('DOMContentLoaded', function() {
      calculate();
    });
  </script>
</body>
</html>